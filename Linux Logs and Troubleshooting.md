# Linux Logs and Troubleshooting

## What Are Logs in Linux?
Logs are **records of events** generated by the system and applications.
They help in **monitoring, debugging, and troubleshooting issues**.

Linux stores most logs as plain text files.

---

## Common Log Locations

### System Logs
- /var/log/messages → general system activity (RHEL/CentOS)
- /var/log/syslog → system logs (Ubuntu/Debian)
- /var/log/dmesg → kernel messages

---

### Authentication Logs
- /var/log/secure → login, sudo, SSH activity (RHEL/CentOS)
- /var/log/auth.log → authentication logs (Ubuntu/Debian)

---

### Application Logs
- Usually under /var/log/<app_name>/
- Example:
  - /var/log/nginx/
  - /var/log/httpd/

---

## systemd Logs (journalctl)

### What Is journalctl?
journalctl is used to view **systemd-managed logs**.

View all logs:
journalctl

---

### Logs for a Specific Service
journalctl -u nginx

---

### Follow Logs in Real Time
journalctl -u nginx -f

---

### Logs Since Last Boot
journalctl -b

---

## Log Monitoring Commands

### tail
View last lines of a log file:
tail -n 50 app.log

Follow logs in real time:
tail -f app.log

---

### grep
Search for specific patterns:
grep ERROR app.log  
grep -i failed auth.log

---

### awk
Extract specific fields:
awk '{print $1}' app.log

---

### sed
Search and replace in logs:
sed 's/ERROR/WARN/g' app.log

---

## Log Rotation

### What Is Log Rotation?
Prevents logs from consuming all disk space by:
- Rotating old logs
- Compressing them
- Deleting old ones

Configuration file:
- /etc/logrotate.conf
- /etc/logrotate.d/

---

## Common Production Issues and Troubleshooting

### Application Is Down
Steps:
1. Check service status
2. Check application logs
3. Check system logs
4. Restart service if needed

---

### Disk Full Issue
Steps:
1. Check disk usage:
   df -h
2. Check inode usage:
   df -i
3. Find large files:
   du -sh /var/log/*
4. Clean or rotate logs

---

### High CPU or Memory Usage
Steps:
1. Identify process using top or htop
2. Check logs for errors
3. Restart or tune application

---

### Permission Denied Error
Steps:
1. Check file permissions
2. Check ownership
3. Check directory permissions
4. Check SELinux status

---

## Real Production Scenario

### Logs Deleted but Disk Still Full
Cause:
- File deleted but process still using it

Check:
lsof | grep deleted

Fix:
- Restart the process or service

---

## Interview Summary
Linux logs are critical for troubleshooting system and application issues. Logs are stored under /var/log and managed by systemd using journalctl. Tools like tail, grep, awk, and sed are essential for real-time debugging in production environments.

---

## Key Takeaways
- Logs help debug and monitor systems
- /var/log is the primary log directory
- journalctl manages systemd logs
- Log rotation prevents disk issues
- Most production issues are solved using logs
